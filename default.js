
var restuarant1 = {
  name: 'Taco Taco!',
  type: 'Mexican',
  numberOfReviews: 34,
  stars: 4.5,
  //image:
  reviews: reviewsOfRestuarant1
};

var restuarant2 = {
  name: 'Pizza Unlimited',
  type: 'Pizza',
  numberOfReviews: 14,
  stars: 3,
  //image:
  reviews: reviewsOfRestuarant2
};

var restuarant3 = {
  name: 'Urban Plates',
  type: 'American',
  numberOfReviews: 198,
  stars: 4,
  //image:
  reviews: reviewsOfRestuarant3
};

var restuarant4 = {
  name: 'Burger!',
  type: 'American',
  numberOfReviews: 56,
  stars: 3.5,
  //image:
  reviews: reviewsOfRestuarant4
};

var restuarant5 = {
  name: 'Pizza Cafe',
  type: 'Pizza',
  numberOfReviews: 74,
  stars: 4,
  //image:
  reviews: reviewsOfRestuarant5
};

var restuarant6 = {
  name: 'Aioli',
  type: 'American',
  numberOfReviews: 201,
  stars: 5,
  //image:
  reviews: reviewsOfRestuarant6
};

var restuarant7 = {
  name: 'Mod Pizza',
  type: 'Pizza',
  numberOfReviews: 93,
  stars: 4.5,
  //image:
  reviews: reviewsOfRestuarant7
};

var reviewsOfRestuarant1 =[
  review1 = {
    name: 'Tom',
    content: '1Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  }
]

var reviewsOfRestuarant2 =[
  review1 ={
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  }
]

var reviewsOfRestuarant3 =[
  review1 = {
    name: 'Tom',
    content: '1Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: '2Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: '3Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  }
]

var reviewsOfRestuarant4 =[
   review1 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  }
]

var reviewsOfRestuarant5 =[
  review1 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  }
]

var reviewsOfRestuarant6 =[
  review1 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  }
]

var reviewsOfRestuarant7 =[
  review1 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review2 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.'
  },
  review3 = {
    name: 'Tom',
    content: 'Uneasy barton seeing remark happen his has. Am possible offering at contempt mr distance stronger an. Attachment excellence announcing or reasonable am on if indulgence. Exeter talked in agreed spirit no he unable do. Betrayed shutters in vicinity it unpacked in. In so impossible appearance considered mr. Mrs him left find are good.788776'
  }
]

var userReview = {};
//var searchFail = document.createTextNode('Sorry but your search brought zero results.');
//var failH1 = document.createElement('h1');
//failH1.appendChild(searchFail);
var restuarantArray = [ restuarant1, restuarant2, restuarant3, restuarant4, restuarant5, restuarant6, restuarant7 ];
var search;
//var addReviewButtonDiv = document.getElementById('review-adder');
var addReviewButton = document.getElementById('add-review');
var restuarants = document.getElementById('restuarants');
var listOfReviews = document.getElementById('review-list');
var searchButton = document.getElementById('form1');
var foodHomePage = document.getElementById('food-image-home');
var userReviewForm = document.getElementById('form2');
var submitUserForm = document.getElementById('submit-user-review');
var homeButton = document.getElementById('home');
var logo = document.getElementById('logo');
var newDiv = document.createElement('div');
var newDivContainer = document.createElement('div');
var newDivMediaLeft = document.createElement('div');
var newH3 = document.createElement('h3');
var newP = document.createElement('p');
var newDivContainer = document.createElement('div');
var searchedArray = [];
restuarant1.reviews = reviewsOfRestuarant1.slice(0);
restuarant2.reviews = reviewsOfRestuarant2.slice(0);
restuarant3.reviews = reviewsOfRestuarant3.slice(0);
restuarant4.reviews = reviewsOfRestuarant4.slice(0);
restuarant5.reviews = reviewsOfRestuarant5.slice(0);
restuarant6.reviews = reviewsOfRestuarant6.slice(0);
restuarant7.reviews = reviewsOfRestuarant7.slice(0);

function stopRefresh(event) {
  var element = restuarants;
  var element2 = listOfReviews;
  while(element.firstChild){
    element.removeChild(element.firstChild);
  }
  while(element2.firstChild){
    element2.removeChild(element2.firstChild);
  }
  restuarants.className = "media";
  listOfReviews.className = "hidden media";
  addReviewButton.className = "hidden btn btn-default";
  foodHomePage.className ="hidden row-fluid";
  event.preventDefault();
  search = document.getElementById('search-bar').value;
  sortRestuarants(restuarantArray, search.toLowerCase());
};

function sortRestuarants(array,b) {
  for (var i = 0; i< array.length; i++){
    var a = array[i];
    if ((a.type.toLowerCase() == b) || (a.name.toLowerCase() == b)){
      addRestuarant(array[i]);
    } else /*if (!(a.type.toLowerCase() == b) && !(a.name.toLowerCase() == b))*/{
      //restuarants.appendChild(failH1);
      }
    }
  };
var reviewsForSearchedRestuarant;
function addRestuarant(array){
  var array = array;
  var name = array.name;
  var stars = array.stars;
  var showButton = document.createElement('button');
  showButton.setAttribute('type', 'button');
  showButton.setAttribute('class', 'show-reviews');
  var buttonContent = document.createTextNode('Show Reviews');
  var newDivRestuarant = document.createElement('div');
  newDiv.className = "media-body";
  var newDivContainerRestuarant = document.createElement('div');
  newDivContainerRestuarant.className = "media well";
  var newDivMediaLeftRestuarant = document.createElement('div');
  newDivMediaLeftRestuarant.className = "media-left";
  var newAnchor = document.createElement('a');
  var newImage = document.createElement('img');
  var nameContent = document.createTextNode(name);
  var starContent = document.createTextNode(stars);
  var restuarantName = document.createElement('h3');
  var restuarantStars = document.createElement('p');
  showButton.appendChild(buttonContent);
  showButton.addEventListener('click',showReviews, false);
  restuarantName.appendChild(nameContent);
  restuarantStars.appendChild(starContent);
  newDivMediaLeftRestuarant.appendChild(restuarantName);
  newDivMediaLeftRestuarant.appendChild(restuarantStars);
  newDivMediaLeftRestuarant.appendChild(showButton);
  newDivContainerRestuarant.appendChild(newDivMediaLeftRestuarant);
  newDivContainerRestuarant.appendChild(newDivRestuarant);
  restuarants.appendChild(newDivContainerRestuarant);
  searchedArray.push(array);
};

function showReviews(event){
  var target = event.target;
  var parent = target.parentElement;
  var theParent = parent.getElementsByTagName("h3")[0];
  reviewsForSearchedRestuarant = theParent.textContent;
  for (var i = 0; i < restuarantArray.length; i++) {
    if (reviewsForSearchedRestuarant === restuarantArray[i].name){
      reviewsList(restuarantArray[i].reviews)
    }
  }
  restuarants.className = "hidden media";
  listOfReviews.className = "media";
};

function reviewsList(array){
  var reviews = array;
  var i = 0;
  var newDiv1 = document.createElement('div');
  newDiv.className = "media-body";
  var newDivContainer1 = document.createElement('div');
  newDivContainer1.className = "media well";
  var newDivMediaLeft1 = document.createElement('div');
  newDivMediaLeft1.className = "media-left";
  while  (i<reviews.length){
    addReviews(reviews[i]);
    newDiv1.appendChild(newDivContainer);
    i++;
  }
  newDivContainer1.appendChild(newDivMediaLeft1);
  newDivContainer1.appendChild(newDiv1);
  listOfReviews.appendChild(newDivContainer1);
  addReviewButton.className = "btn btn-default center-block";
};

function addReviews(array){
  var temp = array;
  var reviewContent = document.createTextNode(temp.content);
  var reviewName = document.createTextNode(temp.name);
  newDiv = document.createElement('div');
  newDiv.className = "media-body";
  newDivContainer = document.createElement('div');
  newDivContainer.className = "media";
  newDivMediaLeft = document.createElement('div');
  newDivMediaLeft.className = "media-left";
  newH3 = document.createElement('h3');
  newP = document.createElement('p');
  newP.appendChild(reviewContent);
  newH3.appendChild(reviewName);
  newDivMediaLeft.appendChild(newH3);
  newDiv.appendChild(newP);
  newDivContainer.appendChild(newDivMediaLeft);
  newDivContainer.appendChild(newDiv);
  return newDivContainer;
};

function reviewButton(event){
  event.preventDefault();
  userReviewForm.className="well";
};

function submitReview(event){
  event.preventDefault();
  var userName = document.getElementById('name-input').value;
  var starChoice = document.getElementsByName('inlineRadio');
  var stars;
  for (var i = 0; i< starChoice.length; i++ ){
    if (starChoice[i].checked){
      stars = starChoice[i].value;
    }
  }
  var reviewContent = document.getElementById('user-review-content').value;
  userReview = {
    name: userName,
    content: reviewContent
  };
  for (var i = 0; i < restuarantArray.length; i++) {
    if (reviewsForSearchedRestuarant === restuarantArray[i].name){
      restuarantArray[i].reviews.push(userReview);
    }
  }
  document.forms['form2'].reset();
  resetReviews();
};

function resetReviews(){
  userReviewForm.className="hidden well";
  var element = listOfReviews;
  while(element.firstChild){
    element.removeChild(element.firstChild);
  }
  for (var i = 0; i < restuarantArray.length; i++) {
    if (reviewsForSearchedRestuarant === restuarantArray[i].name){
      reviewsList(restuarantArray[i].reviews);
    }
  }
}

function goHome(event){
  event.preventDefault();
  var element = listOfReviews;
  var element2 = restuarants;
  while(element.firstChild){
    element.removeChild(element.firstChild);
  }
  while(element2.firstChild){
    element2.removeChild(element2.firstChild);
  }
  addReviewButton.className = "hidden btn btn-default center-block";
  foodHomePage.className ="row-fluid";
  userReviewForm.className="hidden well";
}

searchButton.addEventListener("submit", stopRefresh);
addReviewButton.addEventListener('click', reviewButton);
submitUserForm.addEventListener('click', submitReview);
homeButton.addEventListener('click', goHome);
logo.addEventListener('click', goHome);

//console.log(restuarant7.reviews[1].name);
